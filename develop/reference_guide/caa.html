<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Aero-Acoustics &#8212; zCFD User Guide v2024.04.8259-173-g77764 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=7ede516a" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=659bf730" />
    <script src="../_static/documentation_options.js?v=544129f2"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="icon" href="../_static/fav.png"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Fluid-structure interaction" href="fsi.html" />
    <link rel="prev" title="Equations" href="equations.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="aero-acoustics">
<span id="caa"></span><h1>Aero-Acoustics<a class="headerlink" href="#aero-acoustics" title="Link to this heading">¶</a></h1>
<p>Broadband aero-acoustic simulations can be performed by selecting the DGCAA solver. Aero-acoustic sources are currently limited to stochastic noise sources generated by the FRPM method. These sources are typically driven by a steady state RANS simulation.</p>
<p>The CAA conditions can be mapped from a CFD solution or specified as a set of initial conditions to give freestream density and sound speed.</p>
<p>The configuration can make use of multiple <a class="reference internal" href="#frpm"><span class="std std-ref">“FRPM”</span></a> domains and also include a <a class="reference internal" href="#sponge"><span class="std std-ref">sponge</span></a> layer.</p>
<section id="dgcaa-solver">
<h2>DGCAA Solver<a class="headerlink" href="#dgcaa-solver" title="Link to this heading">¶</a></h2>
<p>The DGCAA is configured in the same way as the other solvers via an equations set with the name <strong>“dgcaa”</strong>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘order’</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>0 | 1 | 2 | 3 | 4</p></td>
</tr>
<tr class="row-odd"><td><p>‘map cfd to caa mesh’</p></td>
<td><p>Yes</p></td>
<td><p>True</p></td>
<td><p>True | False</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm solver only’</p></td>
<td><p>Yes</p></td>
<td><p>False</p></td>
<td><p>True | False</p></td>
</tr>
<tr class="row-odd"><td><p>‘microphone output frequency’</p></td>
<td><p>Yes</p></td>
<td><p>1</p></td>
<td><p>Positive integer</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm sources’</p></td>
<td><p>Yes</p></td>
<td><p>True</p></td>
<td><p>True | False</p></td>
</tr>
<tr class="row-odd"><td><p>‘number of smallest timestep locations to display’</p></td>
<td><p>Yes</p></td>
<td><p>1</p></td>
<td><p>Positive integer</p></td>
</tr>
<tr class="row-even"><td><p>‘rans case name’</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>String; python case file name</p></td>
</tr>
<tr class="row-odd"><td><p>‘rans mesh name’</p></td>
<td><p>No</p></td>
<td></td>
<td><p>String; mesh file name</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm’</p></td>
<td><p>No</p></td>
<td><p>{}</p></td>
<td><p>See <a class="reference internal" href="#frpm"><span class="std std-ref">“frpm”</span></a></p></td>
</tr>
</tbody>
</table>
</section>
<section id="example-usage">
<h2>Example usage<a class="headerlink" href="#example-usage" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
  <span class="o">..</span>
  <span class="s1">&#39;equations&#39;</span> <span class="p">:</span> <span class="s1">&#39;DGCAA&#39;</span><span class="p">,</span>
  <span class="s1">&#39;DGCAA&#39;</span> <span class="p">:</span> <span class="p">{</span>
           <span class="s1">&#39;order&#39;</span> <span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
           <span class="s1">&#39;map cfd to caa mesh&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
           <span class="s1">&#39;frpm solver only&#39;</span> <span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
           <span class="s1">&#39;rans mesh name&#39;</span> <span class="p">:</span> <span class="s2">&quot;rans_mesh.h5&quot;</span><span class="p">,</span>
           <span class="s1">&#39;rans case name&#39;</span> <span class="p">:</span> <span class="s2">&quot;rans_case.py&quot;</span><span class="p">,</span>
           <span class="s1">&#39;frpm sources&#39;</span> <span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
           <span class="s1">&#39;microphone output frequency&#39;</span> <span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
           <span class="s1">&#39;frpm&#39;</span> <span class="p">:</span> <span class="p">{</span><span class="o">...</span><span class="p">}</span>
      <span class="p">}</span>
  <span class="o">..</span>
  <span class="p">}</span>
</pre></div>
</div>
<section id="order">
<h3>order<a class="headerlink" href="#order" title="Link to this heading">¶</a></h3>
<p>This parameter sets the order of the polynomials within each element used to define the numerical solution.</p>
</section>
<section id="map-cfd-to-caa-mesh">
<h3>Map CFD to CAA mesh<a class="headerlink" href="#map-cfd-to-caa-mesh" title="Link to this heading">¶</a></h3>
<p>If there are large variations in the freestream flow properties, it may be desirable to include refraction effects within the acoustic simulation.  This can be done by supplying a CFD flow field where the variations in temperature and velocity are mapped onto the acoustic mesh and are used within the CAA propagation.  If this is set to FALSE, the freestream properties supplied within the IC_1 dictionary are used.</p>
</section>
<section id="frpm-solver-only">
<h3>frpm solver only<a class="headerlink" href="#frpm-solver-only" title="Link to this heading">¶</a></h3>
<p>If this is set to TRUE, there will be no solution of the acoustic (APE-4) equations, only the FRPM solver will be run. This allows you to examine the nearfield FRPM predicted flow field, without the necessity of running a full CAA simulation.</p>
</section>
<section id="microphone-output-frequency">
<h3>microphone output frequency<a class="headerlink" href="#microphone-output-frequency" title="Link to this heading">¶</a></h3>
<p>This is after how many time steps the next solution at the microphone locations should be written to file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note this is number of cycles rather then Hz.</p>
</div>
</section>
<section id="frpm-sources">
<h3>frpm sources<a class="headerlink" href="#frpm-sources" title="Link to this heading">¶</a></h3>
<p>If this is set to TRUE, the acoustic sources driving the acoustic simulation will come from the FRPM method.  If this is set to FALSE, sources will be supplied by the user elsewhere, for example, velocity fluctuations on a surface.</p>
</section>
<section id="number-of-smallest-timestep-locations-to-display">
<h3>number of smallest timestep locations to display<a class="headerlink" href="#number-of-smallest-timestep-locations-to-display" title="Link to this heading">¶</a></h3>
<p>The solver will report this number of cells with the smallest time steps.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The time step utilised by the solver is limited by the smallest (or poorest quality) cells in the mesh.  This keyword allows the user to see the X,Y,Z location of the cells which are restricting the time step and so can be useful for mesh improvement purposes.</p>
</div>
</section>
<section id="rans-case-name">
<h3>rans case name<a class="headerlink" href="#rans-case-name" title="Link to this heading">¶</a></h3>
<p>Specifies the zCFD results file to provide turbulent mean flow data to both the FRPM and CAA solver if required.</p>
</section>
<section id="rans-mesh-name">
<h3>rans mesh name<a class="headerlink" href="#rans-mesh-name" title="Link to this heading">¶</a></h3>
<p>Specifies the zCFD mesh file to provide turbulent mean flow data to both the FRPM and CAA solver if required.</p>
</section>
</section>
<section id="frpm-domains">
<span id="frpm"></span><h2>FRPM Domains<a class="headerlink" href="#frpm-domains" title="Link to this heading">¶</a></h2>
<p>Several FRPM domains can be defined within the aero-acoustic simulation by adding additional ‘FRPM_2’, ‘FRPM_3’, etc., dictionaries. With a single FRPM domain, the dictionary must be labelled ‘FRPM_1’.
Each dictionary can contain the following parameters:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘map cfd to frpm mesh’</p></td>
<td><p>Yes</p></td>
<td><p>True</p></td>
<td><p>True | False</p></td>
</tr>
<tr class="row-odd"><td><p>‘number of frpm mpi processes’</p></td>
<td><p>Yes</p></td>
<td><p>1</p></td>
<td><p>Positive integer</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm spacing’</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>Positive float</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm turbulence integral length scale’</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>Positive float</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm maximum variable turbulence integral length dx scale’</p></td>
<td><p>Yes</p></td>
<td><p>7</p></td>
<td><p>Positive float</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm turbulence integral length scale parameter’</p></td>
<td><p>Yes</p></td>
<td><p>1</p></td>
<td><p>Positive float</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm cart num mesh cells’</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>[x, y, z]: vector of integers or function</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm domain translate’</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>[x, y, z]: vector of integers or function</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm domain rotate (deg)’</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>[x, y, z]: vector of integers or function</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm blend sources from side’</p></td>
<td><p>Yes</p></td>
<td></td>
<td><p>[]: list of floats</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm monitor points’</p></td>
<td><p>No</p></td>
<td></td>
<td><p>[x1, y1, z1, x2, y2, z2…]: list of X, Y, Z coordinates</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm flush particles cycles’</p></td>
<td><p>Yes</p></td>
<td><p>0</p></td>
<td><p>Positive integer</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm mapped tke smoothing iterations’</p></td>
<td><p>Yes</p></td>
<td><p>0</p></td>
<td><p>Positive integer</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm mapped tke smoothing relaxation’</p></td>
<td><p>Yes</p></td>
<td><p>0.2</p></td>
<td><p>Float between 0 &amp; 1</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm inverse distance source mapping’</p></td>
<td><p>Yes</p></td>
<td><p>True</p></td>
<td><p>True | False</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm inverse distance source mapping’</p></td>
<td><p>Yes</p></td>
<td><p>True</p></td>
<td><p>True | False</p></td>
</tr>
<tr class="row-even"><td><p>‘minimum particle speed’</p></td>
<td><p>Yes</p></td>
<td><p>0.0000000001</p></td>
<td><p>Positive float</p></td>
</tr>
<tr class="row-odd"><td><p>‘use constant integral length scale’</p></td>
<td><p>Yes</p></td>
<td><p>True</p></td>
<td><p>True | False</p></td>
</tr>
<tr class="row-even"><td><p>‘wall distance blend over’</p></td>
<td><p>Yes</p></td>
<td><p>-1</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm anisotropy’</p></td>
<td><p>Yes</p></td>
<td><p>-1</p></td>
<td><p>Float</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm inverse distance source mapping distance’</p></td>
<td><p>No</p></td>
<td></td>
<td><p>Float</p></td>
</tr>
<tr class="row-odd"><td><p>‘frpm inflow boundaries’</p></td>
<td><p>No</p></td>
<td><p>[True, True, True, True, True, True]</p></td>
<td><p>List of booleans</p></td>
</tr>
<tr class="row-even"><td><p>‘frpm minimum turbulence integral length scale’</p></td>
<td><p>No</p></td>
<td></td>
<td><p>Float</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id1">
<h2>Example usage<a class="headerlink" href="#id1" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
  <span class="o">..</span>
  <span class="s1">&#39;equations&#39;</span> <span class="p">:</span> <span class="s1">&#39;DGCAA&#39;</span><span class="p">,</span>
  <span class="s1">&#39;DGCAA&#39;</span><span class="p">:</span> <span class="p">{</span>
      <span class="o">..</span>
      <span class="s2">&quot;FRPM_1&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;number of frpm mpi processes&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
          <span class="s2">&quot;map cfd to frpm mesh&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
          <span class="s2">&quot;frpm Spacing&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
          <span class="s2">&quot;frpm turbulence integral length scale&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
          <span class="s2">&quot;frpm cart num mesh cells&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">],</span>
          <span class="s2">&quot;frpm march frequency&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
          <span class="s2">&quot;frpm domain translate&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
          <span class="s2">&quot;frpm domain rotate (Deg)&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span>
          <span class="s2">&quot;frpm blend sources From side&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span>
          <span class="s2">&quot;frpm monitor points&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span>
          <span class="s2">&quot;frpm flush particle cycles&quot;</span><span class="p">:</span> <span class="mi">2500</span><span class="p">,</span>
          <span class="s2">&quot;frpm mapped tke smoothing iterations&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
          <span class="s2">&quot;frpm mapped tke smoothing relaxation&quot;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">,</span>
          <span class="s2">&quot;frpm inverse distance source mapping&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
          <span class="s2">&quot;use constant integral length scale&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
          <span class="s2">&quot;frpm turbulence integral length scale parameter&quot;</span><span class="p">:</span> <span class="mf">0.61</span><span class="p">,</span>
          <span class="s2">&quot;frpm anisotropy&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span>
      <span class="p">},</span>
      <span class="o">..</span>
  <span class="p">},</span>
  <span class="o">..</span>
  <span class="p">}</span>
</pre></div>
</div>
<section id="map-cfd-to-frpm-mesh">
<h3>map cfd to frpm mesh<a class="headerlink" href="#map-cfd-to-frpm-mesh" title="Link to this heading">¶</a></h3>
<p>Load turbulence information from a CFD RANS solution (see <strong>‘Map CFD to CAA mesh’</strong>), if this is set to FALSE, the freestream properties supplied within the IC_1 dictionary are used.</p>
</section>
<section id="number-of-frpm-mpi-processes">
<h3>number of frpm mpi processes<a class="headerlink" href="#number-of-frpm-mpi-processes" title="Link to this heading">¶</a></h3>
<p>Specifies the number of host CPUs to be used by the FRPM solver.</p>
<p>If the FRPM solver is slowing down the overall CAA computation, the user may wish to increase the parallelism by adding more host CPUs to the FRPM computation.  Ideally this should be kept as low as possible as the FRPM method does not naturally scale well with increased CPUs.</p>
</section>
<section id="frpm-spacing">
<h3>frpm spacing<a class="headerlink" href="#frpm-spacing" title="Link to this heading">¶</a></h3>
<p>Specifies the cartesian cell dimensions for the FRPM mesh which is automatically generated by the FRPM solver.</p>
<p>This is required to specify the FRPM mesh used in the FRPM computations.  This dimension will limit the resolved turbulence integral length scale to <span class="math notranslate nohighlight">\(l_{t_{resolved}} = \sqrt{l_t^2 + (0.75 * \Delta)^2}\)</span>  where <span class="math notranslate nohighlight">\(\Delta\)</span> is the frpm spacing.</p>
</section>
<section id="frpm-turbulence-integral-length-scale">
<h3>frpm turbulence integral length scale<a class="headerlink" href="#frpm-turbulence-integral-length-scale" title="Link to this heading">¶</a></h3>
<p>If the user chooses to use a constant integral length scale for the FRPM source predictions, this value will be used.</p>
<p>This value currently requires being set, however is only used if <strong>‘use constant integral length scale’</strong> is set to TRUE.  A constant turbulence integral length scale permits the use of numerically efficient (fast) filtering operations and considerably reduces the FRPM run times.  If a constant turbulence length scale provides a reasonable estimate of the sound producing length scales, this parameter should be used in conjunction with <strong>‘use constant integral length scale’</strong> set to TRUE.</p>
</section>
<section id="frpm-maximum-variable-turbulence-integral-length-dx-scale">
<h3>frpm maximum variable turbulence integral length dx scale<a class="headerlink" href="#frpm-maximum-variable-turbulence-integral-length-dx-scale" title="Link to this heading">¶</a></h3>
<p>Limits the CFD predicted turbulence integral length scale to this value multiplied by the <strong>‘frpm spacing’</strong>.</p>
<p>If the FRPM solver is to use the turbulence integral length scales provided by a CFD solution, it may be necessary to limit the maximum integral length scale within the FRPM solver.  This is to prevent filtering operations which extend over the entire FRPM domain, for each FRPM node, which rapidly becomes expensive.</p>
</section>
<section id="frpm-turbulence-integral-length-scale-parameter">
<h3>frpm turbulence integral length scale parameter<a class="headerlink" href="#frpm-turbulence-integral-length-scale-parameter" title="Link to this heading">¶</a></h3>
<p>Specifies the constant of proportionality for the turbulence length scale calculation from the CFD simulation.
The turbulence integral length scale is specified from turbulence kinetic energy and turbulence eddy frequency using the following expression <span class="math notranslate nohighlight">\(l_t = C_l * \sqrt{k} / (betaStar * omega)\)</span>.  This value specifies <span class="math notranslate nohighlight">\(C_l\)</span>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>0.61 to 1 are the values specified within the literature</p>
</div>
</section>
<section id="frpm-cart-num-mesh-cells">
<h3>frpm cart num mesh cells<a class="headerlink" href="#frpm-cart-num-mesh-cells" title="Link to this heading">¶</a></h3>
<p>Specifies the number of Cartesian cells in each direction.</p>
<p>This vector of integers specifies how many cells are in each Cartesian direction, effectively specifying the extent of the FRPM domain.</p>
</section>
<section id="frpm-march-frequency">
<h3>frpm march frequency<a class="headerlink" href="#frpm-march-frequency" title="Link to this heading">¶</a></h3>
<p>Specifies after now many time steps the FRPM solver should be updated.</p>
<p>The CAA solver time step may be much smaller than that necessary for the FRPM solver, therefore to reduce the FRPM overhead, we can perform fewer FRPM updates and interpolate at time levels in between FRPM updates.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If this is set to -1 the FRPM solver will compute this update frequency based on particles not traversing a cell.</p>
</div>
</section>
<section id="frpm-domain-translate">
<h3>frpm domain translate<a class="headerlink" href="#frpm-domain-translate" title="Link to this heading">¶</a></h3>
<p>Specifies the X, Y, Z translation to place the FRPM domain in the desired location.</p>
<p>The FRPM domain by default is cartesian aligned and placed at the origin.  This parameter allows the user to place the FRPM domain anywhere in the domain.  Note that translation happens AFTER rotation of the domain.</p>
</section>
<section id="frpm-domain-rotate-deg">
<h3>frpm domain rotate (deg)<a class="headerlink" href="#frpm-domain-rotate-deg" title="Link to this heading">¶</a></h3>
<p>Specifies the X, Y, Z rotations to place the FRPM domain in the desired location.</p>
<p>The FRPM domain by default is cartesian aligned and placed at the origin.  This parameter allows the user to rotate the FRPM domain into the desired orientation PRIOR to translation of the domain.</p>
</section>
<section id="frpm-blend-sources-from-side">
<h3>frpm blend sources from side<a class="headerlink" href="#frpm-blend-sources-from-side" title="Link to this heading">¶</a></h3>
<p>Acoustic sources will be blended to zero strength across this distance from the interior of the FRPM domain, towards each of the cartesian boundaries.</p>
<p>It is undesirable to have acoustic sources appearing to vanish within the CAA solver, therefore it is necessary to blend sources smoothly to zero strength.  This is done via a shifted Cosine function where the value is zero at the boundaries and 1 the specified distance into the FRPM domain (when considered in its original Cartesian alignment).  The ordering is distance from [XMIN, XMAX, YMIN, YMAX, ZMIN, ZMAX].  If any of XMIN, XMAX, etc are set to 0, no blending is done.</p>
</section>
<section id="frpm-monitor-points">
<h3>frpm monitor points<a class="headerlink" href="#frpm-monitor-points" title="Link to this heading">¶</a></h3>
<p>Contiguous list of X,Y,Z locations specifying monitor points where data such as velocity and source fluctuations should be output from the FRPM solver.</p>
<p>It may be useful to the user to interrogate the data being produced by the FRPM solver to monitor statistics such as mean turbulence kinetic energy, turbulence spectra (using the frozen turbulence approximation), etc.</p>
</section>
<section id="frpm-flush-particles-cycles">
<h3>frpm flush particles cycles<a class="headerlink" href="#frpm-flush-particles-cycles" title="Link to this heading">¶</a></h3>
<p>Specifies number of FRPM cycles to run prior to starting an aero-acoustic calculation.</p>
<p>During initialisation, particles are placed randomly within active areas in the FRPM domain.  The user can perform a specified number of particle marches to essentially flush particles through the domain such that the distribution of particles is as would be achieved after running for a period of time.  No filtering operations are applied, simply particle tracking.</p>
</section>
<section id="frpm-mapped-tke-smoothing-iterations">
<h3>frpm mapped tke smoothing iterations<a class="headerlink" href="#frpm-mapped-tke-smoothing-iterations" title="Link to this heading">¶</a></h3>
<p>Number of smoothing iterations for turbulence kinetic energy field.</p>
<p>When a CFD solution is mapped to the FRPM domain, there may be a considerable difference in local cell sizes.  As such, the mapped solution may show mild discontinuities.  In order to prevent this causing an issue with numerical differentiations during the FRPM computations, the mapped solution can be smoothed using a relaxed Lagrangian smoothing method.  This parameter specifies the number of smoothing cycles.</p>
<p>It should be noted that peak turbulence levels may reduce and smear our as a result of the smoothing process so the user should take care to ensure the smoothed turbulence field is as representative of the actual CFD solution as possible.</p>
</section>
<section id="frpm-mapped-tke-smoothing-relaxation">
<h3>frpm mapped tke smoothing relaxation<a class="headerlink" href="#frpm-mapped-tke-smoothing-relaxation" title="Link to this heading">¶</a></h3>
<p>Relaxation during smoothing iterations for turbulence kinetic energy field. This parameter specifies the relaxation during the Lagrange smoothing steps specified by <strong>‘frpm mapped tke smoothing iterations’</strong></p>
</section>
<section id="frpm-inverse-distance-source-mapping">
<h3>frpm inverse distance source mapping<a class="headerlink" href="#frpm-inverse-distance-source-mapping" title="Link to this heading">¶</a></h3>
<p>Use inverse distance weighing mapping to map acoustic sources from the FRPM domain to the CAA mesh.</p>
<p>There are two options to map acoustic sources from the FRPM domain to the CAA mesh.  The first is using a modified Shepard inverse distance weighted mapping (recommended) or simply locate the CAA mesh point in the FRPM domain and interpolate the solution to that point (<strong>‘frpm inverse distance source mapping’</strong> set to FALSE).  The inverse distance mapping has been observed to exhibit minimal spurious numerical noise at high frequencies.</p>
</section>
<section id="minimum-particle-speed">
<h3>minimum particle speed<a class="headerlink" href="#minimum-particle-speed" title="Link to this heading">¶</a></h3>
<p>The minimum local flow speed of a particle before it is deleted and reseeded at an inflow boundary.</p>
<p>It is possible, as a result of numerical integration, that a particle may enter an almost dead zone with very negligible flow velocity.  It may be desirable to delete the particle and reseed the particle at an inflow boundary to prevent the build up of particles in stagnant areas (or areas which are inactive).  This should only be used if issues with large numbers of stationary particles are encountered in regions of the FRPM domain.</p>
</section>
<section id="use-constant-integral-length-scale">
<h3>use constant integral length scale<a class="headerlink" href="#use-constant-integral-length-scale" title="Link to this heading">¶</a></h3>
<p>Defines whether or not a constant, user specified, turbulence integral length scale should be used in the FRPM computations.</p>
<p>A constant turbulence integral length scale permits the use of numerically efficient (fast) filtering operations and considerably reduces the FRPM run times.  If a constant turbulence length scale provides a reasonable estimate of the sound producing length scales, this parameter should be set to True.  If this parameter is set to False, the turbulence integral length scale varies throughout the domain and is calculated from the CFD solution.</p>
</section>
<section id="wall-distance-blend-over">
<h3>wall distance blend over<a class="headerlink" href="#wall-distance-blend-over" title="Link to this heading">¶</a></h3>
<p>Defines the distance from walls the acoustic sources should blend to zero.</p>
<p>It is undesirable to have acoustic sources appearing to vanish within the CAA solver, therefore it is necessary to blend sources smoothly to zero strength. This is done via a shifted Cosine function where the value is 1 at a distance of this value from a wall, then blends to zero over this value such that it is zero two times this value from the wall.</p>
</section>
<section id="frpm-anisotropy">
<h3>frpm anisotropy<a class="headerlink" href="#frpm-anisotropy" title="Link to this heading">¶</a></h3>
<p>Defines anisotropy factor for acoustic sources generated by the FRPM method.</p>
<p>If the turbulence field to be modelled is anisotropic, it is possible to specify anisotropy with this parameter.  The streamwise integral length scale will be scaled by <span class="math notranslate nohighlight">\(\sqrt{anisotropy}\)</span> and the length scale normal to the streamwise direction will be scaled by <span class="math notranslate nohighlight">\(1.0 / anisotropy\)</span>.</p>
</section>
<section id="frpm-inverse-distance-source-mapping-distance">
<h3>frpm inverse distance source mapping distance<a class="headerlink" href="#frpm-inverse-distance-source-mapping-distance" title="Link to this heading">¶</a></h3>
<p>Specifies the radial distance from a target CAA mesh point that source data from the FRPM domain should be take from.</p>
<p>This parameter defines a sphere around the CAA mesh point where we wish to map acoustic data to,  where any FRPM point within will contribute to the inverse distance weighted mapping.  By default this is set to 3 times to FRPM mesh spacing, however and be increased or decreased if necessary (due to memory limitations for example).</p>
</section>
<section id="frpm-inflow-boundaries">
<h3>frpm inflow boundaries<a class="headerlink" href="#frpm-inflow-boundaries" title="Link to this heading">¶</a></h3>
<p>List of booleans defining the Cartesian FRPM domain boundaries in which deleted particles can be reseeded into the domain.</p>
<p>If an FRPM particle exits the domain, it is reseeded at one of the FRPM domain boundaries.  This list of booleans allows the user to set which boundaries particles can be reseeded.  By default, reseeding can happen at all boundaries, however some can be turned off if desired.  The booleans are ordered XMIN, XMAX, YMIN, YMAX, ZMIN, ZMAX.</p>
<p>For example, <cite>[True, False, True, False, False, False]</cite> will have particles reseeded at only the XMIN and YMIN boundaries.</p>
</section>
<section id="frpm-minimum-turbulence-integral-length-scale">
<h3>frpm minimum turbulence integral length scale<a class="headerlink" href="#frpm-minimum-turbulence-integral-length-scale" title="Link to this heading">¶</a></h3>
<p>Specifies the minimum turbulence integral length scale permitted when using the turbulence integral length scales predicted by a CFD simulation.</p>
<p>This parameter specifies the minimum turbulence integral length scale permitted, when the turbulence integral length scales being used are those from a CFD simulation.  It is highly recommended to set this value to twice the FRPM spacing.  Any value below this will likely result in the sources being poorly resolved in the FRPM domain and result in spurious high frequency noise.</p>
</section>
</section>
<section id="sponge-layers">
<span id="sponge"></span><h2>Sponge Layers<a class="headerlink" href="#sponge-layers" title="Link to this heading">¶</a></h2>
<p>This option can be used to permit non reflecting farfield boundaries.  When set, damping terms will be linearly ramped from zero at this distance from farfield boundaries, to the highest value (defined by ‘damping factor’) at the farfield boundary.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33.3%" />
<col style="width: 16.7%" />
<col style="width: 16.7%" />
<col style="width: 33.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘distance’</p></td>
<td><p>No</p></td>
<td><p>–</p></td>
<td><p>Number</p></td>
</tr>
<tr class="row-odd"><td><p>‘damping factor’</p></td>
<td><p>No</p></td>
<td><p>–</p></td>
<td><p>Number</p></td>
</tr>
<tr class="row-even"><td><p>‘condition’</p></td>
<td><p>No</p></td>
<td><p>–</p></td>
<td><p>String reference to IC</p></td>
</tr>
</tbody>
</table>
<p><strong>‘distance’</strong> specifies the distance from farfield boundaries in which the solution should be damped towards freestream values. <strong>‘damping factor’</strong> specifies the amount of damping to be applied at cells close to farfield boundaries.</p>
</section>
<section id="id2">
<h2>Example usage<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parameters</span> <span class="o">=</span> <span class="p">{</span>
  <span class="o">..</span>
  <span class="s1">&#39;equations&#39;</span> <span class="p">:</span> <span class="s1">&#39;DGCAA&#39;</span><span class="p">,</span>
  <span class="s1">&#39;DGCAA&#39;</span><span class="p">:</span> <span class="p">{</span><span class="o">..</span><span class="p">},</span>
  <span class="s2">&quot;sponge layer damping&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;distance&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="s2">&quot;damping factor&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">},</span>
  <span class="o">..</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/ZCFD_Mark_CMYK.png" alt="Logo"/>
            </a></p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running/intro.html">Running zCFD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/intro.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="intro.html">Reference Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="reference.html">Reference Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="boundary.html">Boundary Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="time.html">Time Marching</a></li>
<li class="toctree-l2"><a class="reference internal" href="linear_solver.html">Linear Solver Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="equations.html">Equations</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Aero-Acoustics</a></li>
<li class="toctree-l2"><a class="reference internal" href="fsi.html">Fluid-structure interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="materials.html">Material Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="initial.html">Initial Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_conditions.html">Reference Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="boundary.html">Boundary Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="transforms.html">Mesh Transformation</a></li>
<li class="toctree-l2"><a class="reference internal" href="overset.html">Overset</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_output.html">Write Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="report.html">Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Output variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">zCFD Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meshutil.html">Mesh Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fwh.html">FWH solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zm3.html">zM3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualisation.html">Visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pdf.html">PDF copy</a></li>
</ul>


<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2016-23, Zenotech Ltd.
      
      |
      <a href="../_sources/reference_guide/caa.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script>

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-32675146-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>