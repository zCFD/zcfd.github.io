<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Reference Settings &#8212; zCFD User Guide v2025.07.11873-12-g7d02d documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d9aafeaa" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css?v=659bf730" />
    <script src="../_static/documentation_options.js?v=835dd003"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../_static/fav.png"/>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Boundary Conditions" href="boundary.html" />
    <link rel="prev" title="Reference Guide" href="intro.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="reference-settings">
<span id="reference"></span><h1>Reference Settings<a class="headerlink" href="#reference-settings" title="Link to this heading">¶</a></h1>
<section id="reference-state">
<span id="id1"></span><h2>Reference state<a class="headerlink" href="#reference-state" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 10.5%" />
<col style="width: 26.3%" />
<col style="width: 36.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘reference’</p></td>
<td><p>No</p></td>
<td><p>‘IC_1’</p></td>
<td><p>“IC_?” where ? is an integer.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># set reference state to IC_1</span>
<span class="s1">&#39;reference&#39;</span><span class="p">:</span> <span class="s1">&#39;IC_1&#39;</span><span class="p">,</span>
</pre></div>
</div>
<p>Sets the <a class="reference internal" href="initial.html#initial-conditions"><span class="std std-ref">Initial Condition</span></a> which provides the reference quantities when non-dimensionalisation is applied to <a class="reference internal" href="report.html#reporting"><span class="std std-ref">force reporting.</span></a>
“IC_?” must be a valid <a class="reference internal" href="initial.html#initial-conditions"><span class="std std-ref">initial conditions</span></a> dictionary  defined in the parameters file</p>
</section>
<section id="initial-state">
<span id="id2"></span><h2>Initial State<a class="headerlink" href="#initial-state" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 10.5%" />
<col style="width: 26.3%" />
<col style="width: 36.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘name’</p></td>
<td><p>No</p></td>
<td><p>‘IC_1’</p></td>
<td><p>“IC_?” where ? is an integer.</p></td>
</tr>
<tr class="row-odd"><td><p>‘func’</p></td>
<td><p>No</p></td>
<td><p>–</p></td>
<td><p>An (optional) <a class="reference internal" href="../functions.html#initial-function"><span class="std std-ref">initial conditions function</span></a>.</p></td>
</tr>
</tbody>
</table>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># set initial state to IC_1</span>
<span class="s2">&quot;initial&quot;</span><span class="p">:</span> <span class="p">{</span>
  <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;IC_1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Sets which block <a class="reference internal" href="initial.html#initial-conditions"><span class="std std-ref">Initial Condition</span></a> block will be used to provide initial flow field conditions for the simulation.
If <strong>‘func’</strong> is provided it will be used to provide the initial flow field variables on a cell-by-cell basis.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the <strong>‘initial’</strong> entry is missing then the conditions default to the <a class="reference internal" href="#reference-state"><span class="std std-ref">reference</span></a> state.</p>
</div>
</section>
<section id="scale-mesh">
<span id="id3"></span><h2>Scale mesh<a class="headerlink" href="#scale-mesh" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 10.5%" />
<col style="width: 26.3%" />
<col style="width: 36.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘scale’</p></td>
<td><p>No</p></td>
<td><p>[1,1,1]</p></td>
<td><p>[scaleX,scaleY,scaleZ] : Any list of positive floats with length 3</p></td>
</tr>
</tbody>
</table>
<p>Before being loaded in to the solver, the mesh’s [x,y,z] location data is multiplied by this vector.</p>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Scale from mm to metres</span>
<span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.001</span><span class="p">,</span><span class="mf">0.001</span><span class="p">,</span><span class="mf">0.001</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Scale from inches to metres</span>
<span class="s1">&#39;scale&#39;</span><span class="p">:</span> <span class="p">[</span><span class="mf">0.0254</span><span class="p">,</span><span class="mf">0.0254</span><span class="p">,</span><span class="mf">0.0254</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Scale the mesh to be 10 times larger in y axis</span>
<span class="s1">&#39;scale&#39;</span> <span class="p">:</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ‘scale’ parameter applies to the mesh only - not interpolated surface outputs etc. (see <em>Tab x</em>). When a mesh transform matrix is supplied as well as a scaling the scale is applied after the mesh transformation.</p>
</div>
<section id="mesh-transform-matrix">
<h3>Mesh Transform Matrix<a class="headerlink" href="#mesh-transform-matrix" title="Link to this heading">¶</a></h3>
<p>The mesh can be transformed using an <a class="reference external" href="https://www.brainvoyager.com/bv/doc/UsersGuide/CoordsAndTransforms/SpatialTransformationMatrices.html" target="_blank">affine transform</a> (<a class="reference external" href="https://en.wikipedia.org/wiki/Affine_transformation" target="_blank">Wikipedia</a>). Here the upper left 3 x 3 matrix describes a rotation, reflection, scaling or shear (or any combination of) and the 4th column a translation. This 4 x 4 matrix must be supplied as a 4 x 4 numpy array. Any number of transforms can be concatenated together to give the final position. Helper functions for rotations, translations and scalings are provided in zutil.transform. An example is given below:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">zutil.transform</span>

<span class="n">A2B</span> <span class="o">=</span> <span class="n">zutil</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">rotate</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="mf">10.0</span><span class="p">)</span>
<span class="c1"># If a matrix is passed as the last parameter to zutil.transform.* then the transform is concatenated to it.</span>
<span class="n">B2C</span> <span class="o">=</span> <span class="n">zutil</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">([</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span> <span class="n">A2B</span><span class="p">)</span>
<span class="n">C2D</span> <span class="o">=</span> <span class="n">zutil</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">translate</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.0</span><span class="p">],</span> <span class="n">B2C</span><span class="p">)</span>

<span class="s2">&quot;mesh transform matrix&quot;</span><span class="p">:</span> <span class="n">C2D</span>
</pre></div>
</div>
<p>When using the zutil.transform helper functions transforms are applied in the order in which the user calls the functions. Rotations are considered using the same conventions as <a class="reference external" href="https://dfki-ric.github.io/pytransform3d/user_guide/rotations.html" target="_blank">pytransform3d</a> and are interpreted as active and applied using the pre-multiplication convention. For more complex transformations <a class="reference external" href="https://dfki-ric.github.io/pytransform3d" target="_blank">pytransform3d</a> provides a comprehensive collection of python functions and can be easily interfaced with zCFD by simply passing the resulting transformation matrix to the solver.</p>
</section>
</section>
<section id="mesh-quality-remediation">
<h2>Mesh Quality Remediation<a class="headerlink" href="#mesh-quality-remediation" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 10.5%" />
<col style="width: 26.3%" />
<col style="width: 36.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘mesh quality remediation angle threshold’</p></td>
<td><p>No</p></td>
<td><p>‘not set’</p></td>
<td><p>0 - 180</p></td>
</tr>
</tbody>
</table>
<p>zCFD has the ability to detect poor quality cells in the mesh and fix them as first order in space. A poor quality cell is defined as one which has a face where the angle between the cell centre to cell centre vector and the face centre to cell centre vector is greater than that set using the <code class="code docutils literal notranslate"><span class="pre">'mesh</span> <span class="pre">quality</span> <span class="pre">remediation</span> <span class="pre">angle</span> <span class="pre">threshold'</span></code> key. When convergence issues are encountered due to mesh quality setting the angle threshold to around 75 degrees initially may allow the solver to run on the mesh. Ideally the mesh should be improved so the solution can be fully second order over the entire domain.</p>
</section>
<section id="partitioner">
<h2>Partitioner<a class="headerlink" href="#partitioner" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 10.5%" />
<col style="width: 26.3%" />
<col style="width: 36.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘partitioner’</p></td>
<td><p>No</p></td>
<td><p>‘metis’</p></td>
<td><p>[‘metis’]. The name of the partitioner to use.</p></td>
</tr>
</tbody>
</table>
<p>The ‘metis’ partitioner is used to split the computational mesh up so that the job can be run in parallel.  Other partitioners will be added in future code releases</p>
</section>
<section id="restart">
<span id="id5"></span><h2>Restart<a class="headerlink" href="#restart" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 10.5%" />
<col style="width: 26.3%" />
<col style="width: 36.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘restart’</p></td>
<td><p>No</p></td>
<td><p>False</p></td>
<td><p>True/False</p></td>
</tr>
<tr class="row-odd"><td><p>‘restart casename’</p></td>
<td><p>No</p></td>
<td></td>
<td><p>Optionally supply the name of a case to restart from that case, if not supplied then the current casename will be used.</p></td>
</tr>
<tr class="row-even"><td><p>‘restart ignore history’</p></td>
<td><p>No</p></td>
<td><p>False</p></td>
<td><p>True/False: True to ignore the cycle history from restart file and begin the solve as specified in current control file.</p></td>
</tr>
<tr class="row-odd"><td><p>‘interpolate restart’</p></td>
<td><p>No</p></td>
<td><p>False</p></td>
<td><p>True/False: True to interpolate restart results from a different mesh.</p></td>
</tr>
<tr class="row-even"><td><p>‘restart meshname’</p></td>
<td><p>No</p></td>
<td><p>False</p></td>
<td><p>The name of the mesh to interpolate the restart from.</p></td>
</tr>
<tr class="row-odd"><td><p>‘solution smooth cycles’</p></td>
<td><p>No</p></td>
<td><p>0</p></td>
<td><p>Number of Laplace smoothing cycles to smooth initial mapped solution</p></td>
</tr>
</tbody>
</table>
<p>Restart allows you to load a solution from a previous run and continue the solver from that point. By default the solver will look for a &lt;casename&gt;_results.h5 file to load the restart, this can be overridden with the ‘restart casename’ parameter. The cycle history from the restart case can be ignored through the ‘restart ignore history’ option. To begin the current simulation using the &lt;casename&gt;_results.h5 specified in the current control dictionary but ignore the previous cycle history set this option to True.</p>
<p>The default restart assumes that the same mesh is used. Alternatively, a solution from another mesh can be mapped on to a new mesh using the ‘interpolate restart’ parameter.</p>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Restart from previous solution</span>
<span class="s1">&#39;restart&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="c1"># Load solution from case name &#39;my_case&#39;</span>
<span class="s1">&#39;restart casename&#39;</span><span class="p">:</span> <span class="s1">&#39;my_case&#39;</span><span class="p">,</span>
<span class="s1">&#39;restart ignore history&#39;</span><span class="p">:</span> <span class="kc">False</span><span class="p">,</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Restart from previous solution on a different mesh</span>
<span class="s2">&quot;interpolate restart&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
<span class="c1"># Interpolate restart from &quot;different_mesh.h5&quot;</span>
<span class="s2">&quot;restart meshname&quot;</span><span class="p">:</span> <span class="s2">&quot;different_mesh&quot;</span><span class="p">,</span>
<span class="c1"># Do not smooth initial solution</span>
<span class="s2">&quot;solution smooth cycles&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</pre></div>
</div>
<section id="advanced-restart">
<h3>Advanced Restart<a class="headerlink" href="#advanced-restart" title="Link to this heading">¶</a></h3>
<p>It is possible to restart the SA-neg solver from results generated using the Menter SST solver and vice versa, however by default the turbulence field(s) are reset to zero. An approximate initial solution for the SA-neg model can be generated from Menter-SST results by adding the key</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Generate approximate initial field for SA-neg</span>
<span class="s1">&#39;approximate sa from sst results&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</pre></div>
</div>
</section>
</section>
<section id="safe-mode">
<h2>Safe Mode<a class="headerlink" href="#safe-mode" title="Link to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 26.3%" />
<col style="width: 10.5%" />
<col style="width: 26.3%" />
<col style="width: 36.8%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Required</p></th>
<th class="head"><p>Default</p></th>
<th class="head"><p>Valid values</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>‘safe’</p></td>
<td><p>No</p></td>
<td><p>False</p></td>
<td><p>True/False</p></td>
</tr>
</tbody>
</table>
<p>Safe mode turns on extra checks and provides diagnosis in the case of solver stability issues</p>
<p>Example usage:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Enable safe mode</span>
<span class="s1">&#39;safe&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
</pre></div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/ZCFD_Mark_CMYK.png" alt="Logo of zCFD User Guide"/>
            </a></p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../running/intro.html">Running zCFD</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/intro.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="intro.html">Reference Guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Reference Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="boundary.html">Boundary Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="time.html">Time Marching</a></li>
<li class="toctree-l2"><a class="reference internal" href="linear_solver.html">Linear Solver Settings</a></li>
<li class="toctree-l2"><a class="reference internal" href="equations.html">Equations</a></li>
<li class="toctree-l2"><a class="reference internal" href="caa.html">Aero-Acoustics</a></li>
<li class="toctree-l2"><a class="reference internal" href="fsi.html">Fluid-structure interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="materials.html">Material Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="initial.html">Initial Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_conditions.html">Reference Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="boundary.html">Boundary Conditions</a></li>
<li class="toctree-l2"><a class="reference internal" href="fluid_zone.html">Fluid Zones</a></li>
<li class="toctree-l2"><a class="reference internal" href="transforms.html">Mesh Transformation</a></li>
<li class="toctree-l2"><a class="reference internal" href="overset.html">Overset</a></li>
<li class="toctree-l2"><a class="reference internal" href="write_output.html">Write Output</a></li>
<li class="toctree-l2"><a class="reference internal" href="report.html">Reporting</a></li>
<li class="toctree-l2"><a class="reference internal" href="variables.html">Output variables</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../functions.html">zCFD Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../meshutil.html">Mesh Conversion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../fwh.html">FWH solver</a></li>
<li class="toctree-l1"><a class="reference internal" href="../zm3.html">zM3</a></li>
<li class="toctree-l1"><a class="reference internal" href="../visualisation.html">Visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pdf.html">PDF copy</a></li>
</ul>


<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2016-25, Zenotech Ltd.
      
      |
      <a href="../_sources/reference_guide/reference.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script>

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-32675146-1']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'https://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>